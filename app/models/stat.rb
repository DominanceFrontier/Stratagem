class Stat < ActiveRecord::Base
    
  #----------------------------------------------------------------------------
  # Relationships
  #----------------------------------------------------------------------------
  belongs_to :player, polymorphic: true
  #----------------------------------------------------------------------------

  #----------------------------------------------------------------------------
  # Validations
  #----------------------------------------------------------------------------
  validates :player, presence: true
  #----------------------------------------------------------------------------
  
  def win_percentage
    match_count = self.player.matches.count.to_f
    return 100 if match_count == 0
    return (self.wins / match_count * 100).round(2)
  end

end
